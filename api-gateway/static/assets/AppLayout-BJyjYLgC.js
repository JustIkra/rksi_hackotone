import{l as h,Q as m,q as D,v as f,w as t,d as e,a as s,r as o,x as I,u as l,i as c,f as a,aD as g,aE as L,B as M,Y as q,aF as z,aG as F,e as G,E as w,o as x}from"./index-BBTXwqdy.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"header-right"},U={class:"user-dropdown"},Y={__name:"AppLayout",setup($){const r=G(),v=D(),_=h(),y=m(()=>v.path),A=m(()=>_.user?.full_name||_.user?.email),S=d=>{r.push(d)},C=async d=>{if(d==="profile")r.push("/profile");else if(d==="settings")r.push("/settings");else if(d==="logout")try{await _.logout(),w.success("Выход выполнен"),r.push("/login")}catch{w.error("Ошибка выхода")}};return(d,n)=>{const u=o("el-icon"),i=o("el-menu-item"),N=o("el-sub-menu"),B=o("el-menu"),p=o("el-dropdown-item"),V=o("el-dropdown-menu"),b=o("el-dropdown"),k=o("el-header"),E=o("el-main"),R=o("el-container");return x(),f(R,{class:"app-layout"},{default:t(()=>[e(k,{class:"app-header"},{default:t(()=>[n[10]||(n[10]=s("div",{class:"header-left"},[s("div",{class:"logo"},[s("span",{class:"logo-icon"},"ЦМ"),s("span",{class:"logo-text"},"Цифровая модель УК")])],-1)),s("div",T,[e(B,{mode:"horizontal","default-active":y.value,ellipsis:!1,class:"main-menu",onSelect:S},{default:t(()=>[e(i,{index:"/participants"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(c))]),_:1}),n[0]||(n[0]=s("span",null,"Участники",-1))]),_:1}),l(_).isAdmin?(x(),f(N,{key:0,index:"admin"},{title:t(()=>[e(u,null,{default:t(()=>[e(l(g))]),_:1}),n[1]||(n[1]=s("span",null,"Админ",-1))]),default:t(()=>[e(i,{index:"/admin/users"},{default:t(()=>[...n[2]||(n[2]=[a(" Пользователи ",-1)])]),_:1}),e(i,{index:"/admin/weights"},{default:t(()=>[...n[3]||(n[3]=[a(" Весовые таблицы ",-1)])]),_:1}),e(i,{index:"/admin/competencies"},{default:t(()=>[...n[4]||(n[4]=[a(" Словарь компетенций ",-1)])]),_:1}),e(i,{index:"/admin/metric-generate"},{default:t(()=>[...n[5]||(n[5]=[a(" AI Генерация ",-1)])]),_:1}),e(i,{index:"/admin/audit-log"},{default:t(()=>[...n[6]||(n[6]=[a(" Журнал аудита ",-1)])]),_:1})]),_:1})):I("",!0)]),_:1},8,["default-active"]),e(b,{onCommand:C},{dropdown:t(()=>[e(V,null,{default:t(()=>[e(p,{command:"profile"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(c))]),_:1}),n[7]||(n[7]=a(" Профиль ",-1))]),_:1}),e(p,{command:"settings"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(g))]),_:1}),n[8]||(n[8]=a(" Настройки ",-1))]),_:1}),e(p,{divided:"",command:"logout"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(z))]),_:1}),n[9]||(n[9]=a(" Выход ",-1))]),_:1})]),_:1})]),default:t(()=>[s("span",U,[e(u,null,{default:t(()=>[e(l(L))]),_:1}),s("span",null,M(A.value),1),e(u,{class:"el-icon--right"},{default:t(()=>[e(l(q))]),_:1})])]),_:1})])]),_:1}),e(E,{class:"app-main"},{default:t(()=>[F(d.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},J=Q(Y,[["__scopeId","data-v-f03ff977"]]);export{J as A};
