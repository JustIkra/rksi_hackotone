import{l as E,O as m,q as L,v as f,w as t,d as e,a as s,r as n,x as M,u as l,i as c,f as d,a6 as g,a7 as q,B as z,V as D,a8 as I,a9 as O,e as T,E as w,o as v}from"./index-CllNYImy.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"header-right"},j={class:"user-dropdown"},F={__name:"AppLayout",setup(G){const r=T(),x=L(),i=E(),h=m(()=>x.path),y=m(()=>i.user?.full_name||i.user?.email),S=a=>{r.push(a)},A=async a=>{if(a==="profile")r.push("/profile");else if(a==="settings")r.push("/settings");else if(a==="logout")try{await i.logout(),w.success("Выход выполнен"),r.push("/login")}catch{w.error("Ошибка выхода")}};return(a,o)=>{const u=n("el-icon"),_=n("el-menu-item"),C=n("el-sub-menu"),N=n("el-menu"),p=n("el-dropdown-item"),V=n("el-dropdown-menu"),B=n("el-dropdown"),b=n("el-header"),k=n("el-main"),R=n("el-container");return v(),f(R,{class:"app-layout"},{default:t(()=>[e(b,{class:"app-header"},{default:t(()=>[o[7]||(o[7]=s("div",{class:"header-left"},[s("div",{class:"logo"},[s("span",{class:"logo-icon"},"ЦМ"),s("span",{class:"logo-text"},"Цифровая модель УК")])],-1)),s("div",$,[e(N,{mode:"horizontal","default-active":h.value,ellipsis:!1,class:"main-menu",onSelect:S},{default:t(()=>[e(_,{index:"/participants"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(c))]),_:1}),o[0]||(o[0]=s("span",null,"Участники",-1))]),_:1}),l(i).isAdmin?(v(),f(C,{key:0,index:"admin"},{title:t(()=>[e(u,null,{default:t(()=>[e(l(g))]),_:1}),o[1]||(o[1]=s("span",null,"Админ",-1))]),default:t(()=>[e(_,{index:"/admin/users"},{default:t(()=>[...o[2]||(o[2]=[d(" Пользователи ",-1)])]),_:1}),e(_,{index:"/admin/weights"},{default:t(()=>[...o[3]||(o[3]=[d(" Весовые таблицы ",-1)])]),_:1})]),_:1})):M("",!0)]),_:1},8,["default-active"]),e(B,{onCommand:A},{dropdown:t(()=>[e(V,null,{default:t(()=>[e(p,{command:"profile"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(c))]),_:1}),o[4]||(o[4]=d(" Профиль ",-1))]),_:1}),e(p,{command:"settings"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(g))]),_:1}),o[5]||(o[5]=d(" Настройки ",-1))]),_:1}),e(p,{divided:"",command:"logout"},{default:t(()=>[e(u,null,{default:t(()=>[e(l(I))]),_:1}),o[6]||(o[6]=d(" Выход ",-1))]),_:1})]),_:1})]),default:t(()=>[s("span",j,[e(u,null,{default:t(()=>[e(l(q))]),_:1}),s("span",null,z(y.value),1),e(u,{class:"el-icon--right"},{default:t(()=>[e(l(D))]),_:1})])]),_:1})])]),_:1}),e(k,{class:"app-main"},{default:t(()=>[O(a.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},K=U(F,[["__scopeId","data-v-1c393620"]]);export{K as A};
