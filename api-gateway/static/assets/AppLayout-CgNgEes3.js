import{l as h,Q as m,q as z,v as f,w as t,f as e,a as o,r as l,x as E,u as s,i as c,aG as L,e as d,aH as g,aI as M,B as q,Y as D,aJ as G,aK as H,d as J,E as w,o as x}from"./index-CLa57XdF.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"header-container"},T={class:"header-right"},U={class:"user-dropdown"},Y={__name:"AppLayout",setup($){const r=J(),v=z(),_=h(),y=m(()=>v.path),A=m(()=>_.user?.full_name||_.user?.email),S=u=>{r.push(u)},C=async u=>{if(u==="profile")r.push("/profile");else if(u==="settings")r.push("/settings");else if(u==="logout")try{await _.logout(),w.success("Выход выполнен"),r.push("/login")}catch{w.error("Ошибка выхода")}};return(u,n)=>{const a=l("el-icon"),i=l("el-menu-item"),N=l("el-sub-menu"),b=l("el-menu"),p=l("el-dropdown-item"),B=l("el-dropdown-menu"),V=l("el-dropdown"),k=l("el-header"),I=l("el-main"),R=l("el-container");return x(),f(R,{class:"app-layout"},{default:t(()=>[e(k,{class:"app-header"},{default:t(()=>[o("div",Q,[n[11]||(n[11]=o("div",{class:"header-left"},[o("div",{class:"logo"},[o("span",{class:"logo-icon"},"ЦМ"),o("span",{class:"logo-text"},"Цифровая модель УК")])],-1)),o("div",T,[e(b,{mode:"horizontal","default-active":y.value,ellipsis:!1,class:"main-menu",onSelect:S},{default:t(()=>[e(i,{index:"/participants"},{default:t(()=>[e(a,null,{default:t(()=>[e(s(c))]),_:1}),n[0]||(n[0]=o("span",null,"Участники",-1))]),_:1}),e(i,{index:"/organizations"},{default:t(()=>[e(a,null,{default:t(()=>[e(s(L))]),_:1}),n[1]||(n[1]=o("span",null,"Организации",-1))]),_:1}),s(_).isAdmin?(x(),f(N,{key:0,index:"admin"},{title:t(()=>[e(a,null,{default:t(()=>[e(s(g))]),_:1}),n[2]||(n[2]=o("span",null,"Админ",-1))]),default:t(()=>[e(i,{index:"/admin/users"},{default:t(()=>[...n[3]||(n[3]=[d(" Пользователи ",-1)])]),_:1}),e(i,{index:"/admin/weights"},{default:t(()=>[...n[4]||(n[4]=[d(" Весовые таблицы ",-1)])]),_:1}),e(i,{index:"/admin/competencies"},{default:t(()=>[...n[5]||(n[5]=[d(" Словарь компетенций ",-1)])]),_:1}),e(i,{index:"/admin/metric-generate"},{default:t(()=>[...n[6]||(n[6]=[d(" AI Генерация ",-1)])]),_:1}),e(i,{index:"/admin/audit-log"},{default:t(()=>[...n[7]||(n[7]=[d(" Журнал аудита ",-1)])]),_:1})]),_:1})):E("",!0)]),_:1},8,["default-active"]),e(V,{onCommand:C},{dropdown:t(()=>[e(B,null,{default:t(()=>[e(p,{command:"profile"},{default:t(()=>[e(a,null,{default:t(()=>[e(s(c))]),_:1}),n[8]||(n[8]=d(" Профиль ",-1))]),_:1}),e(p,{command:"settings"},{default:t(()=>[e(a,null,{default:t(()=>[e(s(g))]),_:1}),n[9]||(n[9]=d(" Настройки ",-1))]),_:1}),e(p,{divided:"",command:"logout"},{default:t(()=>[e(a,null,{default:t(()=>[e(s(G))]),_:1}),n[10]||(n[10]=d(" Выход ",-1))]),_:1})]),_:1})]),default:t(()=>[o("span",U,[e(a,null,{default:t(()=>[e(s(M))]),_:1}),o("span",null,q(A.value),1),e(a,{class:"el-icon--right"},{default:t(()=>[e(s(D))]),_:1})])]),_:1})])])]),_:1}),e(I,{class:"app-main"},{default:t(()=>[H(u.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},O=K(Y,[["__scopeId","data-v-ac73c2e7"]]);export{O as A};
