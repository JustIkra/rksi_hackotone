import{l as N,m as w,n as V,H as h,v as x,w as a,r as n,o as S,a as t,f as l,y as k,u as r,e as p,B as z,E as c}from"./index-z4An-3zU.js";import{A as B}from"./AppLayout-Da398sgp.js";import{b as E,a as R}from"./labels-z_zmtJvN.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"profile-container"},M={class:"card profile-card"},P={__name:"ProfileView",setup(T){const o=N(),u=w(null),s=V({fullName:""}),_={fullName:[{required:!0,message:"Введите ФИО",trigger:"blur"},{max:255,message:"Максимум 255 символов",trigger:"blur"}]};h(()=>{s.fullName=o.user?.full_name||""});const m=async()=>{u.value&&await u.value.validate(async f=>{if(f)try{await o.updateProfile(s.fullName),c.success("Профиль успешно обновлен")}catch{c.error(o.error||"Ошибка обновления профиля")}})};return(f,e)=>{const d=n("el-input"),i=n("el-form-item"),g=n("el-tag"),v=n("el-button"),b=n("el-form");return S(),x(B,null,{default:a(()=>[t("div",C,[e[3]||(e[3]=t("div",{class:"page-header"},[t("h1",{class:"page-title"}," Профиль "),t("p",{class:"page-subtitle"}," Редактирование личной информации ")],-1)),t("div",M,[l(b,{ref_key:"formRef",ref:u,model:s,rules:_,"label-position":"top",class:"profile-form",onSubmit:k(m,["prevent"])},{default:a(()=>[l(i,{label:"Email"},{default:a(()=>[l(d,{"model-value":r(o).user?.email,disabled:"",size:"large"},null,8,["model-value"]),e[1]||(e[1]=t("div",{class:"form-hint"}," Email нельзя изменить ",-1))]),_:1}),l(i,{label:"ФИО",prop:"fullName"},{default:a(()=>[l(d,{modelValue:s.fullName,"onUpdate:modelValue":e[0]||(e[0]=y=>s.fullName=y),placeholder:"Введите ФИО",size:"large",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(i,{label:"Роль"},{default:a(()=>[l(g,{type:r(E)(r(o).user?.role),size:"large",class:"role-tag"},{default:a(()=>[p(z(r(R)(r(o).user?.role)),1)]),_:1},8,["type"])]),_:1}),l(i,{class:"form-actions"},{default:a(()=>[l(v,{type:"primary",size:"large",loading:r(o).loading,onClick:m},{default:a(()=>[...e[2]||(e[2]=[p(" Сохранить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])]),_:1})}}},I=A(P,[["__scopeId","data-v-3d615cc8"]]);export{I as default};
