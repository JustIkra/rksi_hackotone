import{l as w,m as V,n as h,H as x,v as S,w as e,r as t,o as k,a as n,d as l,y as z,u as r,f as p,B,E as _}from"./index-B06ugpJL.js";import{A as E}from"./AppLayout-BUkm5VzU.js";import{g as R,a as A}from"./labels-BU7QeQ3P.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"profile-container"},P={__name:"ProfileView",setup(T){const o=w(),i=V(null),s=h({fullName:""}),c={fullName:[{required:!0,message:"Введите ФИО",trigger:"blur"},{max:255,message:"Максимум 255 символов",trigger:"blur"}]};x(()=>{s.fullName=o.user?.full_name||""});const m=async()=>{i.value&&await i.value.validate(async d=>{if(d)try{await o.updateProfile(s.fullName),_.success("Профиль успешно обновлен")}catch{_.error(o.error||"Ошибка обновления профиля")}})};return(d,a)=>{const f=t("el-input"),u=t("el-form-item"),g=t("el-tag"),v=t("el-button"),y=t("el-form"),b=t("el-card");return k(),S(E,null,{default:e(()=>[n("div",M,[l(b,{class:"profile-card"},{header:e(()=>[...a[1]||(a[1]=[n("div",{class:"card-header"},[n("h2",null,"Профиль"),n("p",null,"Редактирование личной информации")],-1)])]),default:e(()=>[l(y,{ref_key:"formRef",ref:i,model:s,rules:c,"label-position":"top",onSubmit:z(m,["prevent"])},{default:e(()=>[l(u,{label:"Email"},{default:e(()=>[l(f,{"model-value":r(o).user?.email,disabled:"",size:"large"},null,8,["model-value"]),a[2]||(a[2]=n("div",{class:"form-hint"}," Email нельзя изменить ",-1))]),_:1}),l(u,{label:"ФИО",prop:"fullName"},{default:e(()=>[l(f,{modelValue:s.fullName,"onUpdate:modelValue":a[0]||(a[0]=N=>s.fullName=N),placeholder:"Введите ФИО",size:"large",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(u,{label:"Роль"},{default:e(()=>[l(g,{type:r(R)(r(o).user?.role),size:"large"},{default:e(()=>[p(B(r(A)(r(o).user?.role)),1)]),_:1},8,["type"])]),_:1}),l(u,null,{default:e(()=>[l(v,{type:"primary",size:"large",loading:r(o).loading,onClick:m},{default:e(()=>[...a[3]||(a[3]=[p(" Сохранить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1})}}},I=C(P,[["__scopeId","data-v-c4ca9615"]]);export{I as default};
